{"ast":null,"code":"import _objectWithoutProperties from \"/Users/ruizhou/Desktop/navtask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toPropertyKey from \"/Users/ruizhou/Desktop/navtask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toPropertyKey\";\nimport _objectSpread from \"/Users/ruizhou/Desktop/navtask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/ruizhou/Desktop/navtask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { combineReducers, createStore } from \"redux\";\nimport throttle from \"lodash.throttle\";\nimport seed from \"./seed\";\n\nconst board = (state = {\n  lists: []\n}, action) => {\n  switch (action.type) {\n    case \"ADD_LIST\":\n      {\n        const listId = action.payload.listId;\n        return {\n          lists: [...state.lists, listId]\n        };\n      }\n\n    case \"MOVE_LIST\":\n      {\n        const _action$payload = action.payload,\n              oldListIndex = _action$payload.oldListIndex,\n              newListIndex = _action$payload.newListIndex;\n        const newLists = Array.from(state.lists);\n\n        const _newLists$splice = newLists.splice(oldListIndex, 1),\n              _newLists$splice2 = _slicedToArray(_newLists$splice, 1),\n              removedList = _newLists$splice2[0];\n\n        newLists.splice(newListIndex, 0, removedList);\n        return {\n          lists: newLists\n        };\n      }\n\n    case \"DELETE_LIST\":\n      {\n        const listId = action.payload.listId;\n\n        const filterDeleted = tmpListId => tmpListId !== listId;\n\n        const newLists = state.lists.filter(filterDeleted);\n        return {\n          lists: newLists\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst listsById = (state = {}, action) => {\n  switch (action.type) {\n    case \"ADD_LIST\":\n      {\n        const _action$payload2 = action.payload,\n              listId = _action$payload2.listId,\n              listTitle = _action$payload2.listTitle;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [listId]: {\n            _id: listId,\n            title: listTitle,\n            cards: []\n          }\n        });\n      }\n\n    /*\n    case \"CHANGE_COLOR\":{\n      const { Event, cardId } = action.payload;\n      return { ...state, [cardId]: { color: Event, _id: cardId } };\n    }*/\n\n    case \"CHANGE_LIST_TITLE\":\n      {\n        const _action$payload3 = action.payload,\n              listId = _action$payload3.listId,\n              listTitle = _action$payload3.listTitle;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [listId]: _objectSpread(_objectSpread({}, state[listId]), {}, {\n            title: listTitle\n          })\n        });\n      }\n\n    case \"DELETE_LIST\":\n      {\n        const listId = action.payload.listId;\n\n        const deletedList = state[listId],\n              restOfLists = _objectWithoutProperties(state, [listId].map(_toPropertyKey));\n\n        return restOfLists;\n      }\n\n    case \"ADD_CARD\":\n      {\n        const _action$payload4 = action.payload,\n              listId = _action$payload4.listId,\n              cardId = _action$payload4.cardId;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [listId]: _objectSpread(_objectSpread({}, state[listId]), {}, {\n            cards: [...state[listId].cards, cardId]\n          })\n        });\n      }\n\n    case \"MOVE_CARD\":\n      {\n        const _action$payload5 = action.payload,\n              oldCardIndex = _action$payload5.oldCardIndex,\n              newCardIndex = _action$payload5.newCardIndex,\n              sourceListId = _action$payload5.sourceListId,\n              destListId = _action$payload5.destListId; // Move within the same list\n\n        if (sourceListId === destListId) {\n          const newCards = Array.from(state[sourceListId].cards);\n\n          const _newCards$splice = newCards.splice(oldCardIndex, 1),\n                _newCards$splice2 = _slicedToArray(_newCards$splice, 1),\n                removedCard = _newCards$splice2[0];\n\n          newCards.splice(newCardIndex, 0, removedCard);\n          return _objectSpread(_objectSpread({}, state), {}, {\n            [sourceListId]: _objectSpread(_objectSpread({}, state[sourceListId]), {}, {\n              cards: newCards\n            })\n          });\n        } // Move card from one list to another\n\n\n        const sourceCards = Array.from(state[sourceListId].cards);\n\n        const _sourceCards$splice = sourceCards.splice(oldCardIndex, 1),\n              _sourceCards$splice2 = _slicedToArray(_sourceCards$splice, 1),\n              removedCard = _sourceCards$splice2[0];\n\n        const destinationCards = Array.from(state[destListId].cards);\n        destinationCards.splice(newCardIndex, 0, removedCard);\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [sourceListId]: _objectSpread(_objectSpread({}, state[sourceListId]), {}, {\n            cards: sourceCards\n          }),\n          [destListId]: _objectSpread(_objectSpread({}, state[destListId]), {}, {\n            cards: destinationCards\n          })\n        });\n      }\n\n    case \"DELETE_CARD\":\n      {\n        const _action$payload6 = action.payload,\n              deletedCardId = _action$payload6.cardId,\n              listId = _action$payload6.listId;\n\n        const filterDeleted = cardId => cardId !== deletedCardId;\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [listId]: _objectSpread(_objectSpread({}, state[listId]), {}, {\n            cards: state[listId].cards.filter(filterDeleted)\n          })\n        });\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst cardsById = (state = {}, action) => {\n  switch (action.type) {\n    case \"ADD_CARD\":\n      {\n        const _action$payload7 = action.payload,\n              cardText = _action$payload7.cardText,\n              cardId = _action$payload7.cardId;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [cardId]: {\n            text: cardText,\n            _id: cardId\n          }\n        });\n      }\n\n    /*\n    case \"CHANGE_COLOR\":{\n      const { Event, cardId } = action.payload;\n      return { ...state, [cardId]: { color: Event, _id: cardId } };\n    }*/\n\n    case \"CHANGE_CARD_TEXT\":\n      {\n        const _action$payload8 = action.payload,\n              cardText = _action$payload8.cardText,\n              cardId = _action$payload8.cardId;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [cardId]: _objectSpread(_objectSpread({}, state[cardId]), {}, {\n            text: cardText\n          })\n        });\n      }\n\n    case \"DELETE_CARD\":\n      {\n        const cardId = action.payload.cardId;\n\n        const deletedCard = state[cardId],\n              restOfCards = _objectWithoutProperties(state, [cardId].map(_toPropertyKey));\n\n        return restOfCards;\n      }\n    // Find every card from the deleted list and remove it\n\n    case \"DELETE_LIST\":\n      {\n        const cardIds = action.payload.cards;\n        return Object.keys(state).filter(cardId => !cardIds.includes(cardId)).reduce((newState, cardId) => _objectSpread(_objectSpread({}, newState), {}, {\n          [cardId]: state[cardId]\n        }), {});\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst reducers = combineReducers({\n  board,\n  listsById,\n  cardsById\n});\n\nconst saveState = state => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem(\"state\", serializedState);\n  } catch (_unused) {// ignore write errors\n  }\n};\n\nconst loadState = () => {\n  try {\n    const serializedState = localStorage.getItem(\"state\");\n\n    if (serializedState === null) {\n      return undefined;\n    }\n\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nconst persistedState = loadState();\nconst store = createStore(reducers, persistedState);\nstore.subscribe(throttle(() => {\n  saveState(store.getState());\n}, 1000));\nconsole.log(store.getState());\n\nif (!store.getState().board.lists.length) {\n  console.log(\"SEED\");\n  seed(store);\n}\n\nexport default store;","map":{"version":3,"sources":["/Users/ruizhou/Desktop/navtask/src/store.js"],"names":["combineReducers","createStore","throttle","seed","board","state","lists","action","type","listId","payload","oldListIndex","newListIndex","newLists","Array","from","splice","removedList","filterDeleted","tmpListId","filter","listsById","listTitle","_id","title","cards","deletedList","restOfLists","cardId","oldCardIndex","newCardIndex","sourceListId","destListId","newCards","removedCard","sourceCards","destinationCards","deletedCardId","cardsById","cardText","text","deletedCard","restOfCards","cardIds","Object","keys","includes","reduce","newState","reducers","saveState","serializedState","JSON","stringify","localStorage","setItem","loadState","getItem","undefined","parse","err","persistedState","store","subscribe","getState","console","log","length"],"mappings":"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","sourcesContent":["import { combineReducers, createStore } from \"redux\";\nimport throttle from \"lodash.throttle\";\nimport seed from \"./seed\";\n\nconst board = (state = { lists: [] }, action) => {\n  switch (action.type) {\n    case \"ADD_LIST\": {\n      const { listId } = action.payload;\n      return { lists: [...state.lists, listId] };\n    }\n    case \"MOVE_LIST\": {\n      const { oldListIndex, newListIndex } = action.payload;\n      const newLists = Array.from(state.lists);\n      const [removedList] = newLists.splice(oldListIndex, 1);\n      newLists.splice(newListIndex, 0, removedList);\n      return { lists: newLists };\n    }\n    case \"DELETE_LIST\": {\n      const { listId } = action.payload;\n      const filterDeleted = tmpListId => tmpListId !== listId;\n      const newLists = state.lists.filter(filterDeleted);\n      return { lists: newLists };\n    }\n    default:\n      return state;\n  }\n};\n\nconst listsById = (state = {}, action) => {\n  switch (action.type) {\n    case \"ADD_LIST\": {\n      const { listId, listTitle } = action.payload;\n      return {\n        ...state,\n        [listId]: { _id: listId, title: listTitle, cards: [] }\n      };\n    }\n    /*\n    case \"CHANGE_COLOR\":{\n      const { Event, cardId } = action.payload;\n      return { ...state, [cardId]: { color: Event, _id: cardId } };\n    }*/\n    case \"CHANGE_LIST_TITLE\": {\n      const { listId, listTitle } = action.payload;\n      return {\n        ...state,\n        [listId]: { ...state[listId], title: listTitle }\n      };\n    }\n    case \"DELETE_LIST\": {\n      const { listId } = action.payload;\n      const { [listId]: deletedList, ...restOfLists } = state;\n      return restOfLists;\n    }\n    case \"ADD_CARD\": {\n      const { listId, cardId } = action.payload;\n      return {\n        ...state,\n        [listId]: { ...state[listId], cards: [...state[listId].cards, cardId] }\n      };\n    }\n    case \"MOVE_CARD\": {\n      const {\n        oldCardIndex,\n        newCardIndex,\n        sourceListId,\n        destListId\n      } = action.payload;\n      // Move within the same list\n      if (sourceListId === destListId) {\n        const newCards = Array.from(state[sourceListId].cards);\n        const [removedCard] = newCards.splice(oldCardIndex, 1);\n        newCards.splice(newCardIndex, 0, removedCard);\n        return {\n          ...state,\n          [sourceListId]: { ...state[sourceListId], cards: newCards }\n        };\n      }\n      // Move card from one list to another\n      const sourceCards = Array.from(state[sourceListId].cards);\n      const [removedCard] = sourceCards.splice(oldCardIndex, 1);\n      const destinationCards = Array.from(state[destListId].cards);\n      destinationCards.splice(newCardIndex, 0, removedCard);\n      return {\n        ...state,\n        [sourceListId]: { ...state[sourceListId], cards: sourceCards },\n        [destListId]: { ...state[destListId], cards: destinationCards }\n      };\n    }\n    case \"DELETE_CARD\": {\n      const { cardId: deletedCardId, listId } = action.payload;\n      const filterDeleted = cardId => cardId !== deletedCardId;\n      return {\n        ...state,\n        [listId]: {\n          ...state[listId],\n          cards: state[listId].cards.filter(filterDeleted)\n        }\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst cardsById = (state = {}, action) => {\n  switch (action.type) {\n    case \"ADD_CARD\": {\n      const { cardText, cardId } = action.payload;\n      return { ...state, [cardId]: { text: cardText, _id: cardId } };\n    }\n    /*\n    case \"CHANGE_COLOR\":{\n      const { Event, cardId } = action.payload;\n      return { ...state, [cardId]: { color: Event, _id: cardId } };\n    }*/\n    case \"CHANGE_CARD_TEXT\": {\n      const { cardText, cardId } = action.payload;\n      return { ...state, [cardId]: { ...state[cardId], text: cardText } };\n    }\n    case \"DELETE_CARD\": {\n      const { cardId } = action.payload;\n      const { [cardId]: deletedCard, ...restOfCards } = state;\n      return restOfCards;\n    }\n    // Find every card from the deleted list and remove it\n    case \"DELETE_LIST\": {\n      const { cards: cardIds } = action.payload;\n      return Object.keys(state)\n        .filter(cardId => !cardIds.includes(cardId))\n        .reduce(\n          (newState, cardId) => ({ ...newState, [cardId]: state[cardId] }),\n          {}\n        );\n    }\n    default:\n      return state;\n  }\n};\n\nconst reducers = combineReducers({\n  board,\n  listsById,\n  cardsById\n});\n\nconst saveState = state => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem(\"state\", serializedState);\n  } catch {\n    // ignore write errors\n  }\n};\n\nconst loadState = () => {\n  try {\n    const serializedState = localStorage.getItem(\"state\");\n    if (serializedState === null) {\n      return undefined;\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nconst persistedState = loadState();\nconst store = createStore(reducers, persistedState);\n\nstore.subscribe(\n  throttle(() => {\n    saveState(store.getState());\n  }, 1000)\n);\n\nconsole.log(store.getState());\nif (!store.getState().board.lists.length) {\n  console.log(\"SEED\");\n  seed(store);\n}\n\nexport default store;\n"]},"metadata":{},"sourceType":"module"}